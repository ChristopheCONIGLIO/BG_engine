<!DOCTYPE html>
<html>
    <head>
        <title>C.CONIGLIO Project .js BG_engine</title>
        <style>
            * { margin:0; padding:0; }
            #canvas1{
               float: left;
               width: 100%;
               height: 100vh;
               background-color: rgb(197, 197, 226);
            }
        </style>
        <!-- import de BG engine -->
        <script type="text/javascript" src="../../SRC-BG-ENGINE/BG_EngineImport.js"></script>
        <script type="text/javascript"> loadBGengine("../..")</script>
    </head>
    <body >
        <div class="conteneur">
            <canvas id="canvas1" >BG_engine need a browser canvas HTML5 compatible</canvas>
        </div>
    </body>
    <script type="text/javascript">
        // --------------------------------------------------- //
        // --------------------------------------------------- //
        var color = new HandleColor();
        var pointPassage = new Array();
        for(var k = 0; k < Math.PI*2 ;k+=1.6){
            var dis = Math.random()*200+850;
            pointPassage.push([Math.cos(k)*dis,Math.sin(k)*dis,color.rgb(Math.random()*255,Math.random()*255,Math.random()*255)]);
        }
        // --------------------------------------------------- //
        // --------------------------------------------------- //
        class BG_circleExemple extends BG_circle{
            constructor(bg,onBoard,layer,pX,pY,size,color) {
                super(bg,onBoard,layer,pX,pY,size,color);
                this.geofunc = new Geometry();
                this.current = Math.floor(Math.random()*pointPassage.length)
            }
            enterFrame(){
                if( this.geofunc.distance(this.p_pX,this.p_pY,pointPassage[this.current][0],pointPassage[this.current][1]) < 200 ){
                    this.current++;
                    if( this.current >=  pointPassage.length)       this.current = 0;
                }
                this.setColor(pointPassage[this.current][2]);
                var delta_x = this.p_pX - pointPassage[this.current][0];
                var delta_y = this.p_pY - pointPassage[this.current][1];
                var angle = Math.atan2(delta_y, delta_x)
                this.setPhysicGravity(-Math.cos(angle)*0.9,-Math.sin(angle)*0.9);
            }
        }
        // --------------------------------------------------- //
        // --------------------------------------------------- //
        class scriptExemple extends BG_script{
            constructor(bg) {
                super(bg);// bg accès by this variable -> this.p_bg
                this.inc = 0;
            }
            enterFrame(){
                if( Math.random() > 0.8 && this.inc <300){
                    this.inc+=1;
                    var circle = new BG_circleExemple(this.p_bg,true,12,Math.random()*400-200,Math.random()*400-200,40+Math.random()*30,"#FF0000");
                    circle.setPhysicEnable();
                }
            }
        }
        // --------------------------------------------------- //
        // --------------------------------------------------- //
        
         //declaration de BG_engine
        var bg_engine = new BG_engine("canvas1",20,30);
        //ajout du script via la classe précédente
        var code = new scriptExemple(bg_engine);
       
        for(var k = 0; k < pointPassage.length;k++){
            var objCer = new BG_circle(bg_engine,true,8,pointPassage[k][0]-175,pointPassage[k][1]-175,350,pointPassage[k][2]);
            objCer.setAlpha(0.8);
            var objText = new BG_text(bg_engine,true,9,pointPassage[k][0]-40,pointPassage[k][1]-60,120,"#222222");
            objText.setText(k+1);
            
        }
        // --------------------------------------------------- //
        // --------------------------------------------------- //
       
    </script>
</html>



































